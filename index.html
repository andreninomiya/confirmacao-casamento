<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmação de Presença - Giovana e Wagner</title>
    <!-- Link para o Google Fonts para a fonte Poiret One -->
    <link href="https://fonts.googleapis.com/css2?family=Poiret+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">
    
    <!-- Link para o estilo CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Contêiner principal -->
    <div class="container">
        <div class="header">
            <h1>
                <span>Giovana</span><br>
                <span>e</span><br>
                <span>Wagner</span>
            </h1>
            <h2>18 de Janeiro de 2025</h2>
        </div>

        <h3>Confirmação de Presença</h3>
        <p>Por favor, confirme sua presença preenchendo o campo abaixo.</p>
        <p>Caso traga seus familiares, adicione o nome deles também apertando o botão <b>Adicionar convidado</b>.</p>
        <p>Ao finalizar, aperte o botão <b>Confirmar presença</b>.</p>

        <form id="rsvpForm">
            <div id="namesContainer">
                <div class="input-container">
                    <label for="guestName1">Nome:</label>
                    <input type="text" id="guestName1" name="guestName[]" required>
                </div>
            </div>
            <button type="button" class="add-guest-btn" onclick="addInput()">Adicionar convidado</button>
            <button type="submit" class="confirm-btn">Confirmar presença</button>
        </form>
    </div>

    <script>
        let guestCount = 1;

        // Função para adicionar novos campos de entrada
        function addInput() {
            guestCount++;
            const namesContainer = document.getElementById('namesContainer');
            const newInputDiv = document.createElement('div');
            newInputDiv.className = 'input-container additional';

            newInputDiv.innerHTML = `
                <label for="guestName${guestCount}">Nome:</label>
                <input type="text" id="guestName${guestCount}" name="guestName[]" required>
                <button type="button" class="remove-btn" onclick="removeInput(this)">✖</button>
            `;
            namesContainer.appendChild(newInputDiv);
        }

        // Função para remover um campo de entrada
        function removeInput(button) {
            button.parentElement.remove();
        }

        // Envio do formulário para o Google Sheets
        document.getElementById('rsvpForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const names = Array.from(document.querySelectorAll('input[name="guestName[]"]'))
                            .map(input => input.value.trim())
                            .filter(name => name);

            if (names.length > 0) {
                fetch('https://script.google.com/macros/s/AKfycbzGbbdJA4CqwdcxBWjCK4hKicJXszSzF2Oz6Edq0RXPrGOQq8cr9WC-mDq5iMwXPBk2/exec', { // Substitua pelo URL do seu aplicativo
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ names })
                })
                .then(response => response.json())
                .then(data => alert("Confirmação enviada com sucesso!"))
                .catch(error => alert("Erro ao enviar confirmação."));
            } else {
                alert("Por favor, adicione ao menos um nome.");
            }
        });

    </script>
</body>
</html>
